============================================================
        üß† –ü–ê–ú‚Äô–Ø–¢–ö–ê: PWParents ‚Äî –∑–∞–ø—É—Å–∫, –∑—É–ø–∏–Ω–∫–∞, —Ç–µ—Ö—Ä–µ–∂–∏–º
============================================================

üìç –†–æ–∑—Ç–∞—à—É–≤–∞–Ω–Ω—è:
  –ü—Ä–æ–¥-–±—ñ–ª–¥:     /root/Python/PWParents
  –¢–µ—Ö-–±–æ—Ç (–º—ñ–∫—Ä–æ): /root/Python/pwparents-maint
  Env –ø—Ä–æ–¥:      /root/Python/PWParents/.env
  Env –º—ñ–∫—Ä–æ:     /etc/pwparents/maintenance.env

------------------------------------------------------------
üî∏ 1. –ü–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è —á–µ—Ä–µ–∑ –º—ñ–∫—Ä–æ–±–æ—Ç–∏–∫–∞ (–∑—Ä—É—á–Ω–æ)
------------------------------------------------------------

# –£–≤—ñ–º–∫–Ω—É—Ç–∏ —Ç–µ—Ö–Ω—ñ—á–Ω–∏–π —Ä–µ–∂–∏–º
pwparents-switch maint
# (–∑—É–ø–∏–Ω—è—î prod —ñ –∑–∞–ø—É—Å–∫–∞—î –º—ñ–∫—Ä–æ–±–æ—Ç–∞)

# –ü–æ–≤–µ—Ä–Ω—É—Ç–∏ –±–æ–π–æ–≤–æ–≥–æ –±–æ—Ç–∞
pwparents-switch prod
# (–∑—É–ø–∏–Ω—è—î –º—ñ–∫—Ä–æ–±–æ—Ç–∞ —ñ –∑–∞–ø—É—Å–∫–∞—î –ø—Ä–æ–¥)

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å –æ–±–æ—Ö
pwparents-switch status
# -> –ø–æ–∫–∞–∂–µ active/inactive –¥–ª—è –æ–±–æ—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤


------------------------------------------------------------
üî∏ 2. –†—É—á–Ω–µ –∫–µ—Ä—É–≤–∞–Ω–Ω—è (—è–∫—â–æ —Å–∫—Ä–∏–ø—Ç –Ω–µ –ø—Ä–∞—Ü—é—î)
------------------------------------------------------------

# 2.1 –ó—É–ø–∏–Ω–∏—Ç–∏ –æ–±–∏–¥–≤–∞ —Å–µ—Ä–≤—ñ—Å–∏ –Ω–∞ –≤—Å—è–∫ –≤–∏–ø–∞–¥–æ–∫
systemctl stop pwparents.service
systemctl stop pwparents-maint.service

# 2.2 –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ –Ω–µ –∑–∞–ª–∏—à–∏–ª–æ—Å—å –∑–∞–π–≤–∏—Ö –ø—Ä–æ—Ü–µ—Å—ñ–≤
pgrep -af "app.main|maintenance_bot.py" || true

# 2.3 –Ø–∫—â–æ –ª–∏—à–Ω—ñ –ø—Ä–æ—Ü–µ—Å–∏ —î ‚Äî –≤–±–∏—Ç–∏ —ó—Ö
pkill -f "app.main|maintenance_bot.py" || true

------------------------------------------------------------
# 2.4 –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –±–æ–π–æ–≤–æ–≥–æ –±–æ—Ç–∞
systemctl start pwparents.service

# –∞–±–æ ‚Äî —Ç–µ—Ö—Ä–µ–∂–∏–º –≤—Ä—É—á–Ω—É
systemctl start pwparents-maint.service

------------------------------------------------------------
# 2.5 –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å —ñ –ª–æ–≥–∏
systemctl status pwparents.service --no-pager
journalctl -u pwparents.service -n 50

# –î–ª—è —Ç–µ—Ö—Ä–µ–∂–∏–º—É:
systemctl status pwparents-maint.service --no-pager
journalctl -u pwparents-maint.service -n 50

‚úÖ Active (running)  ‚Üí –±–æ—Ç –ø—Ä–∞—Ü—é—î
‚ùå Failed / inactive ‚Üí –¥–∏–≤–∏—Ç–∏—Å—å journalctl -xeu ...

------------------------------------------------------------
üî∏ 3. –ß–∞—Å—Ç—ñ –ø—Ä–æ–±–ª–µ–º–∏ —ñ —Ä—ñ—à–µ–Ω–Ω—è
------------------------------------------------------------

‚ùóÔ∏è–ü–æ–º–∏–ª–∫–∞ ‚Äúunavailable resources‚Äù –∞–±–æ ‚Äúconflict‚Äù:
  - –ó–Ω–∞—á–∏—Ç—å, –æ–¥–Ω–æ—á–∞—Å–Ω–æ –∑–∞–ø—É—â–µ–Ω—ñ –¥–≤–∞ –±–æ—Ç–∏ –∑ –æ–¥–Ω–∏–º —Ç–æ–∫–µ–Ω–æ–º.
  –†—ñ—à–µ–Ω–Ω—è:
    pgrep -af "app.main|maintenance_bot.py"
    pkill -f "app.main|maintenance_bot.py"
    systemctl daemon-reload
    systemctl start pwparents.service

‚ùóÔ∏è–ù–µ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä —à–ª—è—Ö —É unit-—Ñ–∞–π–ª—ñ:
  systemctl cat pwparents.service
  –ú–∞—î –±—É—Ç–∏:
    WorkingDirectory=/root/Python/PWParents
    ExecStart=/root/Python/PWParents/.venv/bin/python -m app.main

‚ùóÔ∏è–ü—ñ—Å–ª—è —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —é–Ω—ñ—Ç—ñ–≤:
  systemctl daemon-reload

------------------------------------------------------------
üî∏ 4. –ö–æ—Ä–æ—Ç–∫–∏–π ‚Äúcheat block‚Äù
------------------------------------------------------------

# === –¢–ï–•–†–ï–ñ–ò–ú ===
pwparents-switch maint
# –∞–±–æ –≤—Ä—É—á–Ω—É:
systemctl stop pwparents.service
systemctl start pwparents-maint.service

# === –ü–†–û–î ===
pwparents-switch prod
# –∞–±–æ –≤—Ä—É—á–Ω—É:
systemctl stop pwparents-maint.service
systemctl start pwparents.service

# === –ü–ï–†–ï–í–Ü–†–ö–ê ===
systemctl status pwparents.service --no-pager
journalctl -u pwparents.service -n 50

------------------------------------------------------------
üî∏ 5. –ü–æ—Ä–∞–¥–∏
------------------------------------------------------------
- –¢—Ä–∏–º–∞–π .env –ø—Ä–æ–¥ –æ–∫—Ä–µ–º–æ: /root/Python/PWParents/.env
- –ú—ñ–∫—Ä–æ–±–æ—Ç –∂–∏–≤–µ –Ω–µ–∑–∞–ª–µ–∂–Ω–æ ‚Äî /root/Python/pwparents-maint
- –ü–µ—Ä–µ–¥ –∞–ø–¥–µ–π—Ç–æ–º –∑–∞–≤–∂–¥–∏ –ø–µ—Ä–µ—Ö–æ–¥—å —É —Ç–µ—Ö—Ä–µ–∂–∏–º.
- –ü—ñ—Å–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–¥—É ‚Üí —Å—Ç–≤–æ—Ä—é–π –Ω–æ–≤–µ venv —ñ —Å—Ç–∞–≤ requirements.
- –Ø–∫—â–æ —Å—É–º–Ω—ñ–≤–∞—î—à—Å—è ‚Äî —Ä–æ–±–∏ –±–µ–∫–∞–ø –ø–µ—Ä–µ–¥ —á–∏—â–µ–Ω–Ω—è–º:
    tar -czf /root/Python/PWParents_backup_$(date +%F_%H%M).tgz /root/Python/PWParents

============================================================
